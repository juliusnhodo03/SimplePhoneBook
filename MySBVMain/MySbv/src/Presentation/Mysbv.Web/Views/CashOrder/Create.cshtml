@using System.Web.Optimization
@using Kendo.Mvc.UI
@model Application.Dto.CashOrder.CashOrderDto

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="http://cdn.kendostatic.com/2014.2.903/styles/kendo.common.min.css" rel="stylesheet" />
<link href="http://cdn.kendostatic.com/2014.2.903/styles/kendo.default.min.css" rel="stylesheet" />
<link href="http://cdn.kendostatic.com/2014.2.903/styles/kendo.dataviz.min.css" rel="stylesheet" />
<link href="http://cdn.kendostatic.com/2014.2.903/styles/kendo.dataviz.default.min.css" rel="stylesheet" />

<script src="~/Scripts/CashOrdering.Screen.Layout.js"> </script>
<script src="~/Scripts/CashOrdering.Model.js"></script>
<script src="~/Scripts/App/Controllers/CashOrderController.js"></script>

<script>
    var model = '@Html.Raw(Json.Encode(Model))';
</script>

<form ng-app="MySbvApp" ng-controller="CashOrderController">

    <div class="well" id="CashOrderContainer">

        @using (Html.BeginForm())
        {
            @Html.AntiForgeryToken()

            @Html.Hidden("hdCashOrderId", new { id = "hdCashOrderId" })
            @Html.Hidden("hdTransactionReferenceNumber", new { id = "hdTransactionReferenceNumber" })
            
            @Html.HiddenFor(model => model.CreatedById, new { id = "hdCreatedById" })
            @Html.HiddenFor(model => model.CreateDate, new { id = "hdCreatedDate" })

            @Html.HiddenFor(model => model.InitialCitSerialNumber, new { id = "hdInitialCitSerialNumber" })

            <div class="ui-widget-header">
                <h4 style="margin-left: 5px">New Cash Order</h4>
            </div>


            <div class="ui-widget-content" style="padding: 5px;">
                <div class="row">
                    <div class="span3">
                        @Html.LabelFor(model => model.MerchantId, new { @class = "label", style = "width: 205px" })
                    </div>

                    <div class="span2">

                        @Html.DropDownList("ddlMerchants", ViewData["Merchants"] as SelectList, 
                        new
                        {
                            id = "ddlMerchants", 
                            @style = "width: 225px; margin-left: -15px"
                        })

                    </div>

                    <div class="span3 offset1">
                        @Html.LabelFor(model => model.SiteId, new { @class = "label", style = "width: 205px; margin-left:-20px;" })
                    </div>

                    <div class="span2">
                        @Html.DropDownList("ddlSites", ViewData["Sites"] as SelectList, 
                        new
                        {
                            id = "ddlSites",
                            @style = "width: 210px; margin-left:-35px; position:relative;"
                        })
                    </div>
                </div>

                <div class="row">
                    <div class="span3">
                        @Html.LabelFor(model => model.CapturedDateTime, new { @class = "label", style = "width: 205px" })
                    </div>

                    <div class="span2">
                        @Html.TextBoxFor(model => model.CapturedDateTime, new { disabled = "disabled", id = "CapturedDateTime", @style = "width:210px; margin-bottom: 8px; margin-left: -15px" })
                    </div>

                    <div class="span3 offset1">
                        @Html.LabelFor(model => model.CitCode, new { @class = "label", style = "width: 205px; margin-left:-20px;" })
                    </div>

                    <div class="span2">
                        @Html.TextBoxFor(model => model.CitCode, new { id = "CitCode", @disabled = "disabled", @style = "width:195px; margin-bottom: 8px; margin-left: -35px" })
                    </div>
                </div>


                <div class="row">
                    <div class="span3">
                        @Html.LabelFor(model => model.DeliveryDate, new { @class = "label", style = "width: 205px" })
                    </div>

                    <div class="span2">
                        @Html.TextBoxFor(model => model.DeliveryDate, new { id = "DeliveryDate", @readonly = "readonly", @style = "width:210px; background:#fff; margin-bottom: 8px; margin-left: -15px" })
                    </div>

                    <div class="span3 offset1">
                        @Html.LabelFor(model => model.CashOrderAmount, new { @class = "label", style = "width: 205px; margin-left:-20px;" })
                    </div>

                    <div class="span2">
                        @Html.TextBoxFor(model => model.CashOrderAmount, new { id = "CashOrderAmount", placeholder = "0.00", @style = "width:195px; margin-bottom: 8px; margin-left: -35px" })
                    </div>
                </div>


                <div class="row">
                    <div class="span5">
                        @Html.LabelFor(model => model.ContainerNumberWithCashForExchange, new { @class = "label", style = "width: 435px" })
                    </div>

                    <div class="span3 offset1">
                        @Html.TextBoxFor(model => model.ContainerNumberWithCashForExchange, new { id = "ContainerNumberWithCashForExchange", @maxlength = 14, @style = "width:420px; margin-bottom: 8px; margin-left:-20px;" })
                    </div>
                </div>


                <div class="row">
                    <div class="span5">
                        @Html.LabelFor(model => model.EmptyContainerOrBagNumber, new { @class = "label", style = "width: 435px" })
                    </div>

                    <div class="span3 offset1">
                        @Html.TextBoxFor(model => model.EmptyContainerOrBagNumber, new { id = "EmptyContainerOrBagNumber", @maxlength = 14, @style = "width:420px; margin-bottom: 8px; margin-left:-20px" })
                    </div>
                </div>


                <div class="row">
                    <div class="span3">
                        @Html.LabelFor(model => model.CashOrderTypeId, new { @class = "label", style = "width: 205px" })
                    </div>

                    <div class="span2">
                        @Html.DropDownListFor(model => model.CashOrderTypeId, ViewData["OrderTypes"] as SelectList,
                            new
                            {
                                id = "ddlOrderType",
                                @style = "width: 225px; margin-left:-15px;"
                            })
                    </div>
                </div>

                

                <div class="row" id="EftUploads" style="display:none;">
                    <div class="span3">
                        <label class="label" style="width: 205px; margin-top:10px!important;">Attachments</label>
                    </div>

                    <div class="span8">
                        @(Html.Kendo().Upload()
                              .Name("files")
                              .TemplateId("fileTemplate")
                              .Async(a => a
                                  .Save("Save", "Upload", new { cashOrderId = Model.CashOrderId })
                                  .Remove("Remove", "Upload", new { cashOrderId = Model.CashOrderId })
                                  .AutoUpload(false)
                              ).Events(events => events
                                  .Select("onSelect")
                              )
                              .HtmlAttributes(new { accept = ".pdf" })
                        )
                        
                        <script id="fileTemplate" type="text/x-kendo-template">
                            <span class='k-progress'></span>
                            <div class='file-wrapper'>
                                <span class='file-icon #=addExtensionClass(files[0].extension)#'></span>
                                <h4 class='file-heading file-name-heading' style='padding-left:32px!important; margin-top:-3px!important;'>Name: #=name#</h4>
                                <h4 class='file-heading file-size-heading' style='padding-left:32px!important; margin-top:-15px!important;'>Size: #=size# bytes</h4>
                                <button type='button' class='k-upload-action'></button>
                            </div>
                        </script>
                    </div>
                </div>
            </div>


            <br />


            <table class="CombinedContainerDrops" style="width:100% !important">
                <tr>
                    <td style="width: 445px;">
                        <div class=" ui-widget-header">
                            <h5 class="header-forwarded" style="text-align: center"><strong>Cash Forwarded</strong> for Exchange</h5>
                        </div>
                    </td>
                    <td style="width: 5px;"></td>

                    <td style="width: 445px;">
                        <div class="ui-widget-header">
                            <h5 style="text-align: center"><strong>Cash Required</strong> in Exchange</h5>
                        </div>

                    </td>
                </tr>
                <tr>
                    <td colspan="3" class="separator"></td>
                </tr>

                @Html.Hidden("hdCashOrderContainerId", 0, new { id = "hdCashOrderContainerId" })
                @Html.Hidden("hdBagReferenceNumber", 0, new { id = "hdBagReferenceNumber" })

                <tr>
                    <td class="CashForwarded">
                        <div class="CashForwardedContainerDrop">
                            <table style="width: 445px;">
                                <tr>
                                    <td class="columnInsertEft">
                                        <div class="EFTDelete" style="border: 1px solid; padding: 10px;">

                                            @Html.Hidden("hdContainerDropId", 0, new { name = "hdContainerDropId" })
                                            @Html.Hidden("hdDropStatusName", "ACTIVE", new { name = "hdDropStatusName" })

                                            <!-- Note Details -->

                                            <fieldset id="NotesFieldset">
                                                <strong>Notes</strong>
                                                <div class="devideHor" style="margin-top: 2px"></div>

                                                <table>
                                                    <tr>
                                                        <td>
                                                            <table>
                                                                <tr>
                                                                    <td>Denomination</td>
                                                                    <td style="width: 70px"></td>
                                                                    <td class="right">Count</td>
                                                                    <td style="width: 40px"></td>
                                                                    <td class="right">Value (R)</td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="clsNotessubtotal">
                                                            <div class="clsnotes">
                                                                <table>
                                                                    <tr class="clsline">
                                                                        <td class="last">
                                                                            @Html.DropDownList("dropDownListNote", ViewData["dropDownListNote"] as SelectList, new { style = "width:125px; height:27px;", denominationType = "Notes" })
                                                                            @Html.Hidden("ContainerDropItemId", 0, new { name = "hdContainerDropItemId" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textNoteCount", "", new { @class = "dropdown denomination", style = "margin-right: 5px" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textNoteValue", "", new { @class = "sbv_notes_value dropdown denomination" })
                                                                        </td>
                                                                        <td style="width:20px !important;">
                                                                            <a type="button" name="buttonAddNotes" style="height:18px; width:18px;">
                                                                                <img src="~/Content/images/add.png" style="height:18px;" alt="" class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                        <td style="height: 16px; visibility: hidden; width: 16px;">
                                                                            <a class="remove" type="button" name="buttonRemoveNotes">
                                                                                <img alt="" src='~/Content/images/remove.png' class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div> <!-- take_notes -->
                                                            <table>
                                                                <tr>
                                                                    <td style="text-align: left; width: 120px;">Subtotal</td>
                                                                    <td>
                                                                        @Html.TextBox("textNotesSubtotal", "0.00", new { @class = "SubTotals", @readonly = "readonly" })
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </fieldset>

                                            <br />


                                            <!-- Coin Details -->
                                            <fieldset id="CoinsFieldset">
                                                <strong>Coins</strong>
                                                <div class="devideHor" style="margin-top: 2px"></div>

                                                <table>
                                                    <tr>
                                                        <td>
                                                            <table width="360px">
                                                                <tr>
                                                                    <td>Denomination</td>
                                                                    <td style="width: 70px"></td>
                                                                    <td align="right">Count</td>
                                                                    <td style="width: 40px"></td>
                                                                    <td align="right">Value (R)</td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="clsCoinssubtotal">
                                                            <div class="clscoins">
                                                                <table class='denominationparent' currencytype="Coins" width="50%">
                                                                    <tr class="clsCoinsline">
                                                                        <td class="last">
                                                                            @Html.DropDownList("dropDownListCoin", ViewData["dropDownListCoin"] as SelectList, new { style = "width:125px; height:27px;", denominationType = "Coins" })
                                                                            @Html.Hidden("ContainerDropItemId", 0, new { name = "hdContainerDropItemId" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textCoinCount", "", new { @class = "dropdown denomination", style = "margin-right: 5px" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textCoinValue", "", new { @class = "sbv_coins_value dropdown denomination", style = "text-align:right" })
                                                                        </td>
                                                                        <td>
                                                                            <a type="button" name="buttonAddCoins">
                                                                                <img src="~/Content/images/add.png" alt="" class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                        <td style="height: 16px; width: 16px;">
                                                                            <a class="remove" type="button" name="buttonRemoveCoins" style="visibility: hidden">
                                                                                <img alt="" src='~/Content/images/remove.png' class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div> <!-- take -->
                                                            <table>
                                                                <tr>
                                                                    <td style="text-align: left; width: 120px;">Subtotal</td>
                                                                    <td>
                                                                        @Html.TextBox("textCoinsSubtotal", "0.00", new { @class = "SubTotals", @readonly = "readonly" })
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>

                                            </fieldset>

                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </td>

                    <td></td>

                    <td class="CashRequired">
                        <div class="CashRequiredContainerDrop">
                            <table style="width: 445px;" class="ContainerDropClone">
                                <tr>
                                    <td>
                                        <div style="border: 1px solid; padding: 10px;">

                                            @Html.Hidden("hdContainerDropId", 0, new { name = "hdContainerDropId" })
                                            @Html.Hidden("hdDropStatusName", "ACTIVE", new { name = "hdDropStatusName" })

                                            <!-- Note Details -->

                                            <fieldset id="NotesFieldset">
                                                <strong>Notes</strong>
                                                <div class="devideHor" style="margin-top: 2px"></div>

                                                <table>
                                                    <tr>
                                                        <td>
                                                            <table>
                                                                <tr>
                                                                    <td>Denomination</td>
                                                                    <td style="width: 70px"></td>
                                                                    <td class="right">Count</td>
                                                                    <td style="width: 40px"></td>
                                                                    <td class="right">Value (R)</td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="clsNotessubtotal">
                                                            <div class="clsnotes">
                                                                <table>
                                                                    <tr class="clsline">
                                                                        <td class="last">
                                                                            @Html.DropDownList("dropDownListNote", ViewData["dropDownListNote"] as SelectList, new { style = "width:125px; height:27px;", denominationType = "Notes" })
                                                                            @Html.Hidden("ContainerDropItemId", 0, new { name = "hdContainerDropItemId" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textNoteCount", "", new { @class = "dropdown denomination", style = "margin-right: 5px" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textNoteValue", "", new { @class = "sbv_notes_value dropdown denomination" })
                                                                        </td>
                                                                        <td style="width:20px !important;">
                                                                            <a type="button" name="buttonAddNotes" style="height:18px; width:18px;">
                                                                                <img src="~/Content/images/add.png" style="height:18px;" alt="" class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                        <td style="height: 16px; visibility: hidden; width: 16px;">
                                                                            <a class="remove" type="button" name="buttonRemoveNotes">
                                                                                <img alt="" src='~/Content/images/remove.png' class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div> <!-- take_notes -->
                                                            <table>
                                                                <tr>
                                                                    <td style="text-align: left; width: 120px;">Subtotal</td>
                                                                    <td>
                                                                        @Html.TextBox("textNotesSubtotal", "0.00", new { @class = "SubTotals", @readonly = "readonly" })
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </fieldset>

                                            <br />


                                            <!-- Coin Details -->
                                            <fieldset id="CoinsFieldset">
                                                <strong>Coins</strong>
                                                <div class="devideHor" style="margin-top: 2px"></div>

                                                <table>
                                                    <tr>
                                                        <td>
                                                            <table width="360px">
                                                                <tr>
                                                                    <td>Denomination</td>
                                                                    <td style="width: 70px"></td>
                                                                    <td align="right">Count</td>
                                                                    <td style="width: 40px"></td>
                                                                    <td align="right">Value (R)</td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>

                                                    <tr>
                                                        <td class="clsCoinssubtotal">
                                                            <div class="clscoins">
                                                                <table class='denominationparent' currencytype="Coins" width="50%">
                                                                    <tr class="clsCoinsline">
                                                                        <td class="last">
                                                                            @Html.DropDownList("dropDownListCoin", ViewData["dropDownListCoin"] as SelectList, new { style = "width:125px; height:27px;", denominationType = "Coins" })
                                                                            @Html.Hidden("ContainerDropItemId", "0", new { name = "hdContainerDropItemId" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textCoinCount", "", new { @class = "dropdown denomination", style = "margin-right: 5px" })
                                                                        </td>
                                                                        <td>
                                                                            @Html.TextBox("textCoinValue", "", new { @class = "sbv_coins_value dropdown denomination", style = "text-align:right" })
                                                                        </td>
                                                                        <td>
                                                                            <a type="button" name="buttonAddCoins">
                                                                                <img src="~/Content/images/add.png" alt="" class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                        <td style="height: 16px; width: 16px;">
                                                                            <a class="remove" type="button" name="buttonRemoveCoins" style="visibility: hidden">
                                                                                <img alt="" src='~/Content/images/remove.png' class="allButtonsBorder" />
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                </table>
                                                            </div> <!-- take -->
                                                            <table>
                                                                <tr>
                                                                    <td style="text-align: left; width: 120px;">Subtotal</td>
                                                                    <td>
                                                                        @Html.TextBox("textCoinsSubtotal", "0.00", new { @class = "SubTotals", @readonly = "readonly" })
                                                                    </td>
                                                                </tr>
                                                            </table>
                                                        </td>
                                                    </tr>
                                                </table>

                                            </fieldset>

                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </td>
                </tr>


                <tr>
                    <td colspan="3" class="separator"></td>
                </tr>



                <tr>
                    <td colspan="3" style="border: 1px solid; padding: 5px;">

                        <div class="row pull-right">
                            <div class="span1">
                                <button name="Submitted" style="margin-left: 0;" class="btn btn-mini btn-inverse" type="button">Submit</button>
                            </div>

                            <div class="span1">
                                <button name="Captured" style="margin-left:15px; font-weight:bold" class="btn btn-mini btn btn-success" type="button">Save</button>
                            </div>

                            <div class="span2">
                                <button onclick="exitOrder()" class="btn btn-mini btn-danger" style="width: 100px !important; margin-left: 30px; font-weight: bold" type="button">Cancel</button>
                            </div>

                        </div>
                    </td>
                </tr>
            </table>
        }
    </div>


    <!-- =========================================== -->
    <!-- the html below is FOR CLONING PURPOSES ONLY -->
    <!-- =========================================== -->
    <!-- Notes Denomination Clone -->
    <table class='outer allnotes'>
        <tr class="clsline">
            <td class="last">
                @Html.DropDownList("dropDownListNote", ViewData["dropDownListNote"] as SelectList, new { style = "width:125px; height:27px;", denominationType = "Notes" })
                @Html.Hidden("ContainerDropItemId", "0", new { name = "hdContainerDropItemId" })
            </td>
            <td>
                @Html.TextBox("textNoteCount", "", new { @class = "dropdown denomination", style = "margin-right: 5px" })
            </td>
            <td>
                @Html.TextBox("textNoteValue", "", new { @class = "sbv_notes_value dropdown denomination" })
            </td>
            <td>
                <a type="button" name="buttonAddNotes">
                    <img src="~/Content/images/add.png" alt="" class="allButtonsBorder" />
                </a>
            </td>
            <td style="height: 16px; width: 16px;">
                <a class="remove" type="button" name="buttonRemoveNotes">
                    <img alt="" src='~/Content/images/remove.png' class="allButtonsBorder" />
                </a>
            </td>
        </tr>
    </table>


    <!-- Coins Denomination Clone -->
    <table class='outer'>
        <tr class="clsCoinsline">
            <td class="last">
                @Html.DropDownList("dropDownListCoin", ViewData["dropDownListCoin"] as SelectList, new { style = "width:125px; height:27px;", denominationType = "Coins" })
                @Html.Hidden("ContainerDropItemId", "0", new { name = "hdContainerDropItemId" })
            </td>
            <td>
                @Html.TextBox("textCoinCount", "", new { @class = "dropdown denomination", style = "margin-right: 5px" })
            </td>
            <td>
                @Html.TextBox("textCoinValue", "", new { @class = "sbv_coins_value dropdown denomination", style = "text-align:right" })
            </td>
            <td>
                <a type="button" name="buttonAddCoins">
                    <img src="~/Content/images/add.png" alt="" class="allButtonsBorder" />
                </a>
            </td>
            <td style="height: 16px; width: 16px;">
                <a class="remove" type="button" name="buttonRemoveCoins">
                    <img alt="" src='~/Content/images/remove.png' class="allButtonsBorder" />
                </a>
            </td>
        </tr>
    </table><!-- ContainerDrop for Forwarded cash Clone-->

    <div class="CashForwardedContainerDrop hide top" id="CashForwardedContainerDropClone">
        <table style="width: 445px;">
            <tr>
                <td class="columnInsertEft000">
                    <div class="EFTDeleteCloneAtLoadinging" style="border: 1px solid; padding: 10px;">

                        @Html.Hidden("hdContainerDropId", 0, new { name = "hdContainerDropId" })
                        @Html.Hidden("hdDropStatusName", "ACTIVE", new { name = "hdDropStatusName" })

                        <!-- Note Details -->
                        @{
                            <fieldset id="NotesFieldset">
                                <strong>Notes</strong>
                                <div class="devideHor" style="margin-top: 2px"></div>

                                <table>
                                    <tr>
                                        <td>
                                            <table>
                                                <tr>
                                                    <td>Denomination</td>
                                                    <td style="width: 70px"></td>
                                                    <td class="right">Count</td>
                                                    <td style="width: 40px"></td>
                                                    <td class="right">Value (R)</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="clsNotessubtotal">
                                            <div class="clsnotes">
                                                <table>

                                                    <tr class="clsline">
                                                        <td class="last">

                                                            @Html.DropDownList("dropDownListNote", ViewData["dropDownListNote"] as SelectList, new { id = "dropDownListNote", style = "width:125px; height:27px;", denominationType = "Notes" })

                                                            @Html.Hidden("hdContainerDropItemId", 0, new { name = "hdContainerDropItemId" })
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("textNoteCount", "", new { @class = "dropdown denomination right", style = "margin-right: 5px" })
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("textNoteValue", "", new { @class = "sbv_notes_value dropdown denomination right" })
                                                        </td>
                                                        <td style="width: 20px !important;">
                                                            <a type="button" name="buttonAddNotes" style="height: 18px; width: 18px;">
                                                                <img src="~/Content/images/add.png" style="height: 18px;" alt="" class="allButtonsBorder" />
                                                            </a>
                                                        </td>
                                                        <td style="height: 16px; width: 16px;"></td>
                                                    </tr>
                                                </table>
                                            </div> <!-- take_notes -->
                                            <table>
                                                <tr>
                                                    <td style="text-align: left; width: 120px;">Subtotal</td>
                                                    <td>
                                                        @Html.TextBox("textNotesSubtotal", "0.00", new { @class = "SubTotals right", @readonly = "readonly" })
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                </table>
                            </fieldset>
                        }

                        <!-- Coin Details -->
                        @{
                            <br />
                            <fieldset id="CoinsFieldset">
                                <strong>Coins</strong>
                                <div class="devideHor" style="margin-top: 2px"></div>

                                <table>
                                    <tr>
                                        <td>
                                            <table width="360px">
                                                <tr>
                                                    <td>Denomination</td>
                                                    <td style="width: 70px"></td>
                                                    <td align="right">Count</td>
                                                    <td style="width: 40px"></td>
                                                    <td align="right">Value (R)</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td class="clsCoinssubtotal">
                                            <div class="clscoins">
                                                <table class='denominationparent' currencytype="Coins" width="50%">

                                                    <tr class="clsCoinsline">
                                                        <td class="last">
                                                            @Html.DropDownList("dropDownListCoin", ViewData["dropDownListCoin"] as SelectList,
                                                                new { id = "dropDownListCoin", style = "width:125px; height:27px;", denominationType = "Notes" })

                                                            @Html.Hidden("hdContainerDropItemId", "0", new { name = "hdContainerDropItemId" })
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("textCoinCount", "", new { @class = "dropdown denomination right", style = "margin-right: 5px" })
                                                        </td>
                                                        <td>
                                                            @Html.TextBox("textCoinValue", "", new { @class = "sbv_coins_value dropdown denomination right" })
                                                        </td>
                                                        <td>
                                                            <a type="button" name="buttonAddCoins">
                                                                <img src="~/Content/images/add.png" alt="" class="allButtonsBorder" />
                                                            </a>
                                                        </td>
                                                        <td style="height: 16px; width: 16px;"></td>
                                                    </tr>
                                                </table>
                                            </div> <!-- take -->
                                            <table>
                                                <tr>
                                                    <td style="text-align: left; width: 120px;">Subtotal</td>
                                                    <td>
                                                        @Html.TextBox("textCoinsSubtotal", "0.00", new { @class = "SubTotals right", @readonly = "readonly" })
                                                    </td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>

                            </fieldset>

                        }

                    </div>
                </td>
            </tr>
        </table>
    </div>





    @section Scripts {
        @Scripts.Render("~/bundles/jqueryval")
    }
    
    
    <script id="ValidationWindow" type="text/x-kendo-template">
        <div style="margin-left:20px;">
            <span class="headerTitle" />
            <span style="margin-left:5px;" class="confirmation-message"></span>
        </div>

        <div style="margin-left:160px; margin-top:5px;">
            <button id="btnConfirmCancel" class="no-cancel k-button" style="width:80px">Ok</button>
        </div>
    </script>


    <script id="UploadsWindow" type="text/x-kendo-template">
        <div style="margin-left:20px;">
            <span class="headerTitle" />
            <span style="margin-left:5px;" class="confirmation-message"></span>
        </div>

        <div style="margin-left:160px; margin-top:5px;">
            <button id="btnConfirmCancel" class="no-cancel k-button" style="width:80px">Ok</button>
        </div>
    </script>
    

    <script id="ConfirmWindow" type="text/x-kendo-template">
        <div style="margin-left:20px;">
            <img src="@Url.Content("~/Content/Images/question.png")" style="float:left" />
            <br />
            <p style="margin-left:5px;" class="confirmation-message"></p>
        </div>

        <div style="margin-left:160px; margin-top:5px;">
            <button id="btnConfirmCancel" class="confirm-cancel k-button" style="width:80px">Yes</button>
            <button id="btnNoCancel" class="no-cancel k-button" style="width:80px">No</button>
        </div>
    </script>
    

    <script id="DeleteContainermWindow" type="text/x-kendo-template">
        <div style="margin-left:20px;">
            <img src="@Url.Content("~/Content/Images/question.png")" style="float:left" />
            <br />
            <p style="margin-left:5px;" class="confirmation-message"></p>
        </div>

        <div style="margin-left:160px; margin-top:5px;">
            <button id="btnConfirmCancel" class="confirm-cancel k-button" style="width:80px">Yes</button>
            <button id="btnNoCancel" class="no-cancel k-button" style="width:80px">No</button>
        </div>
    </script>
    

    <script id="loadingWindow" type="text/x-kendo-template">
        <div style="margin-left:20px; margin-top:30px;">
            <table>
                <tr>
                    <td><img src="@Url.Content("~/Content/Images/loading.gif")" /></td>
                    <td style="width:10px;"></td>
                    <td><span class="confirmation-message"></span></td>
                </tr>
            </table>
        </div>

        <div style="margin-left:160px; margin-top:5px;">
            <button id="btnConfirmCancel" class="confirm-cancel" style="width:80px; visibility:hidden">Yes</button>
        </div>
    </script>
    

    <script id="MessageWindow" type="text/x-kendo-template">
        <div style="margin-left:20px;">
            <img src="@Url.Content("~/Content/Images/infoimg.jpg")" class="imager" style="float:left" />
            <br />
            <p style="margin-left:5px;" class="confirmation-message"></p>
        </div>

        <div style="margin-left:160px; margin-top:15px;">
            <button id="btnConfirmCancel" class="confirm-cancel k-button" style="width:80px">Ok</button>
        </div>
    </script>
    

    <script type="text/javascript">
        function addExtensionClass(extension) {
            extension = extension.toLowerCase();

            switch (extension) {
                case '.jpg':
                case '.img':
                case '.png':
                case '.gif':
                    return "img-file";
                case '.doc':
                case '.docx':
                    return "doc-file";
                case '.xls':
                case '.xlsx':
                    return "xls-file";
                case '.pdf':
                    return "pdf-file";
                case '.zip':
                case '.rar':
                    return "zip-file";
                default:
                    return "default-file";
            }
        }
    </script>
    

    <script type="text/javascript">

        var dateToday = new Date('@ViewBag.DeliveryDate');
        var cashOrderNumberOfDays = parseInt('@ViewBag.CashOrderNumberOfDays');
        var numberOfMonthsToShowOnCalendar = parseInt('@ViewBag.NumberOfMonthsToShowOnCalendar');

        var uploadEftProofOfPaymentUrl = '@Html.Raw(Json.Encode(Url.RequestContext.HttpContext.Request.ApplicationPath)) ';

        $("#ddlMerchants").change(function () {
            var parameters = { merchantId: $(this).val() };
            $("#CitCode").val("");

            $.ajax({
                type: "POST",
                data: JSON.stringify(parameters),
                contentType: "application/json; charset=utf-8",
                url: '@Url.Action("GetMerchantSites")',
                dataType: "json",
                success: function (data) {
                    // drop down options

                    var ddlSites = $("#ddlSites");
                    ddlSites.find("option").remove();

                    for (var i = 0; i < data.length; i++) {
                        ddlSites.append($('<option citdigit="' + data[i].Tag + '" name="' + data[i].Text + '" value="' + data[i].Id + '">' + data[i].Name + '</option>'));
                    }
                }
            });
        });



        $("button[name='Submitted'], button[name='Captured']").click(function () {
            var action = $(this).attr('name');

            switch (action) {
            case 'Submitted':
            {
                OnSubmitCashOrder();
                break;
            }
            case 'Captured': {
                saveCashOrder('@Url.Action("Create")', '@Url.Action("Index")', 'ACTIVE');
                break;
            }
            default: { break; }
            }
        });



        function OnSubmitCashOrder() {
            var kendoWindow = $("<div />").kendoWindow({
                title: "Cash Order",
                resizable: false,
                modal: true,
                width: 430,
                height: 160
            });

            kendoWindow.data("kendoWindow")
                .content($("#ConfirmWindow").html())
                .center().open();

            $(".confirmation-message").html("Are you sure you want to submit Cash Order?");

            kendoWindow
                .find(".no-cancel,.confirm-cancel")
                .click(function () {
                    if ($(this).hasClass("confirm-cancel")) {

                        loadingWindow("Please wait...<br/>Submitting Cash order.");
                        $("#btnConfirmCancel").click();
                        saveCashOrder('@Url.Action("Submit")', '@Url.Action("Index")', 'SUBMITTED');
                    }

                    kendoWindow.data("kendoWindow").close();
                })
                .end();
        }

    </script>
    

    <style type="text/css">
        legend {
            visibility: visible !important;
        }

        #NotesFieldset, #CoinsFieldset {
            background: ButtonFace;
            border: 1px solid gray;
            padding: 10px;
        }

        .clsNotessubtotal, .clsnotes, .clsline, .remove, .CashForwardedContainerDrop, .CashRequiredContainerDrop, .ContainerDropClone {
        }

        .CashRequiredContainerDrop, .CashForwardedContainerDrop {
            background: #fff;
        }

        .right {
            text-align: right;
        }

        .left {
            text-align: left;
        }

        .separator {
            height: 5px;
        }

        .k-window-action {
            visibility: hidden !important;
        }

    </style>
    

    <script>

        function exitOrder() {
            var kendoWindow = $("<div />").kendoWindow({
                title: "Confirm",
                resizable: false,
                modal: true,
                width: 430,
                height: 160
            });

            kendoWindow.data("kendoWindow")
                .content($("#ConfirmWindow").html())
                .center().open();

            $(".confirmation-message").html("Transaction is not yet saved&nbsp;Do you want to continue?");

            kendoWindow
                .find(".no-cancel,.confirm-cancel")
                .click(function () {
                    if ($(this).hasClass("confirm-cancel")) {
                        window.location.href = '@Url.Action("Index")';
                    }

                    kendoWindow.data("kendoWindow").close();
                })
                .end();
        }

    </script>
    

    <style>
        .file-wrapper {
            height: 40px !important;
            padding-top: 5px !important;   
        }

        .file-icon {
            display: inline-block;
            float: left;
            width: 16px;
            height: 16px;
            margin-left: 10px;
            margin-top: 2px;
            padding-right: 5px;
        }

        .img-file {
            background-image: url(@Url.Content("~/Content/images/upload/jpg.png"));
            background-size: 16px 16px;
            background-repeat: no-repeat;
        }

        .doc-file {
            background-image: url(@Url.Content("~/Content/images/upload/doc.png"));
            background-size: 16px 16px;
            background-repeat: no-repeat;
        }

        .pdf-file {
            background-image: url(@Url.Content("~/Content/images/upload/pdf.png"));
            background-size: 16px 16px;
            background-repeat: no-repeat;
        }

        .xls-file {
            background-image: url(@Url.Content("~/Content/images/upload/xls.png"));
            background-size: 16px 16px;
            background-repeat: no-repeat;
        }

        .zip-file {
            background-image: url(@Url.Content("~/Content/images/upload/zip.png"));
            background-size: 16px 16px;
            background-repeat: no-repeat;
        }

        .default-file {
            background-image: url(@Url.Content("~/Content/images/upload/default.png"));
            background-size: 16px 16px;
            background-repeat: no-repeat;
        }

        #example .file-heading {
            font-size: 8pt;
            display: inline-block;
            float: left;
            width: 450px;
            margin: 0 0 0 20px;
            height: 25px;
            -ms-text-overflow: ellipsis;
            -o-text-overflow: ellipsis;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space: nowrap;
        }

        #example .file-name-heading {
            font-weight: normal;
        }

        #example .file-size-heading {
            font-weight: normal;
            font-style: italic;
            margin-left: 10px !important;
            margin-top: -3px !important;
        }

        li.k-file .file-wrapper .k-upload-action {
            position: absolute;
            top: 0;
            right: 0;
        }

        li.k-file div.file-wrapper {
            position: relative;
            height: 75px;

        }

        .k-button:hover, .k-button.k-state-hover {
            color: #2e2e2e;
            border-color: #b6b6b6;
            background-color: #bcb4b0;
        }
        .k-button {
            color: #2e2e2e;
            border-color: #c5c5c5;
            background-color: #e9e9e9;
        }
        .k-upload-button {
            position: relative;
            min-width: 7.167em;
            overflow: hidden!important;
            direction: ltr;
        }
        .k-button {
            display: inline-block;
            margin: 0;
            padding: 2px 7px 2px;
            font-family: inherit;
            line-height: 1.72em;
            text-align: center;
            cursor: pointer;
            text-decoration: none;
        }
        .k-textbox>input, .k-input[type="text"], .k-input[type="number"], .k-textbox, .k-picker-wrap .k-input, .k-button {
            font-family: inherit;
            border-style: solid;
            border-width: 1px;
            -webkit-appearance: none;
        }

        .k-header, .k-treemap-title, .k-grid-header .k-header>.k-link {
            color: #313131;
        }
        .k-block, .k-widget, .k-popup, .k-content, .k-toolbar, .k-dropdown .k-input {
            color: #2e2e2e;
        }
        .k-block, .k-widget {
            line-height: normal;
            outline: 0;
        }

        .k-header, .k-treemap-title, .k-grid-header .k-header>.k-link {
            color: #313131;
        }

        .file-wrapper h4 {
            font-size: 8pt !important;
            padding: 0 !important;
        }
    </style>

</form>
